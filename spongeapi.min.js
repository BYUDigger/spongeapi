var iframeId,iid,handleSetupResponse,spongeapi=spongeapi||{};spongeapi.initComplete=!1,spongeapi.init=function(e,a,n,p){iid=window.location.search.slice(1),window.spongecell=window.spongecell||{},e.hasOwnProperty("type")?(spongeapi.type=e.type,spongeapi.initObj=e.initObj,spongeapi.isDynamic=e.isDynamic,spongeapi.onReady=e.onReady):(spongeapi.type=e,spongeapi.initObj=a,spongeapi.isDynamic=n,spongeapi.onReady=p),window==parent.top?handleSetupResponse():parent.postMessage(JSON.stringify({type:"api",topic:"setup",iid:iid,callback:"handleSetupResponse"}),"*")},spongeapi.openScreen=function(e){window!=parent.top?parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",screen:e}),"*"):console.log("openScreen("+e+")")},spongeapi.openLanding=function(e){window!=parent.top?(window.open(spongecell.apiData.landingPages[e].url,"_blank"),parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",landingPage:spongecell.apiData.landingPages[e]}),"*")):console.log("openLanding("+e+"): "+spongecell.apiData.landingPages[e].url)},spongeapi.getDynamicText=function(e){return spongecell.apiData.properties?spongecell.apiData.properties[e].text:e},spongeapi.getDynamicImage=function(e){return spongecell.apiData.assets?spongecell.apiData.assets[e].src:e},spongeapi.parseEdge=function(){for(var e in spongecell.apiData.properties){var a=spongeapi.initObj.$(e);a&&a.text(spongecell.apiData.properties[e].text)}for(var e in spongecell.apiData.assets){var a=spongeapi.initObj.$(e);a&&a.css({"background-image":"url("+spongecell.apiData.assets[e].src+")"})}},spongeapi.parseDynamicCanvasImages=function(){for(var e,a=0;e=lib.properties.manifest[a];a++)spongecell.apiData.assets.hasOwnProperty(e.id)&&(e.crossOrigin="Anonymous",e.src=spongeapi.getDynamicImage(e.id))},spongeapi.parseDynamicCanvasText=function(){for(var e in spongecell.apiData.properties)exportRoot[e]&&(exportRoot[e].txt.text=spongeapi.getDynamicText(e))},spongeapi.parseDynamicClasses=function(){var e;for(var a in spongecell.apiData.properties)if(e=document.getElementsByClassName(a),e.length>0)for(var n=0;n<e.length;n++)e[n].innerHTML=spongeapi.getDynamicText(a);else(e=document.getElementById(a))&&(e.innerHTML=spongeapi.getDynamicText(a));for(var a in spongecell.apiData.assets)if(e=document.getElementsByClassName(a),e.length>0)for(var n=0;n<e.length;n++)e[n].src=spongeapi.getDynamicImage(a),e[n].setAttribute("source",spongeapi.getDynamicImage(a));else(e=document.getElementById(a))&&(e.src=spongeapi.getDynamicImage(a),e.setAttribute("source",spongeapi.getDynamicImage(a)))},handleSetupResponse=function(e){if(!spongeapi.initComplete){switch(window.spongecell.apiData=e||{},!spongecell.apiData.assets&&testData&&(spongecell.apiData=testData),spongeapi.type){case"canvas":spongeapi.isDynamic&&spongecell.apiData.assets&&spongeapi.parseDynamicCanvasImages(),spongeapi.initObj.loadManifest(lib.properties.manifest);break;case"gwd":spongeapi.isDynamic&&spongecell.apiData.properties&&spongeapi.parseDynamicClasses();break;case"edge":spongeapi.isDynamic&&spongecell.apiData.properties&&spongeapi.parseEdge();break;case"custom":spongeapi.isDynamic&&spongecell.apiData.properties&&spongeapi.parseDynamicClasses()}spongeapi.onReady&&spongeapi.onReady()}spongeapi.initComplete=!0},window.addEventListener("message",function(event){var message=event.data;message&&eval(message.callback)(message.data)});