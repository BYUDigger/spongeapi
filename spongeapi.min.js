var iframeId,iid,handleSetupResponse,testData,spongeapi=spongeapi||{},spongecell=spongecell||{};spongeapi.initComplete=!1,spongeapi.init=function(e,a,i,s){iid=window.location.search.slice(1),window.spongecell=window.spongecell||{},e.hasOwnProperty("type")?(spongeapi.type=e.type,spongeapi.initObj=e.initObj,spongeapi.isDynamic=e.isDynamic,spongeapi.onReady=e.onReady):(spongeapi.type=e,spongeapi.initObj=a,spongeapi.isDynamic=i,spongeapi.onReady=s),window==parent.top?(spongcell={},handleSetupResponse()):parent.postMessage(JSON.stringify({type:"api",topic:"setup",iid:iid,callback:"handleSetupResponse"}),"*")},spongeapi.openScreen=function(e,a){window!=parent.top?a&&a.engagement?parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",engage:!0,screen:e}),"*"):parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",engage:!1,screen:e}),"*"):console.log("openScreen("+e+","+a+")")},spongeapi.openLanding=function(e){window!=parent.top?parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",landingPage:spongecell.apiData.landingPages[e]}),"*"):console.log("openLanding("+e+"): "+spongecell.apiData.landingPages[e].url)},spongeapi.getDynamicText=function(e){return spongecell.hasOwnProperty("apiData")?spongecell.apiData.properties[e].text:e},spongeapi.getDynamicImage=function(e){return spongecell.hasOwnProperty("apiData")?spongecell.apiData.assets[e].src:e},spongeapi.parseEdge=function(){for(var e in spongecell.apiData.properties){var a=spongeapi.initObj.$(e);a&&a.text(spongecell.apiData.properties[e].text)}for(var e in spongecell.apiData.assets){var a=spongeapi.initObj.$(e);a&&a.css({"background-image":"url("+spongecell.apiData.assets[e].src+")"})}},spongeapi.parseDynamicCanvasImages=function(){for(var e,a=0;e=lib.properties.manifest[a];a++)spongecell.apiData.assets.hasOwnProperty(e.id)&&(e.crossOrigin="Anonymous",e.src=spongeapi.getDynamicImage(e.id))},spongeapi.parseDynamicCanvasText=function(){for(var e in spongecell.apiData.properties)exportRoot[e]&&(exportRoot[e].txt.text=spongeapi.getDynamicText(e))},spongeapi.parseDynamicClasses=function(){var e;for(var a in spongecell.apiData.properties)if(e=document.getElementsByClassName(a),e.length>0)for(var i=0;i<e.length;i++)e[i].innerHTML=spongeapi.getDynamicText(a);else(e=document.getElementById(a))&&(e.innerHTML=spongeapi.getDynamicText(a));for(var a in spongecell.apiData.assets)if(e=document.getElementsByClassName(a),e.length>0)for(var i=0;i<e.length;i++)e[i].src=spongeapi.getDynamicImage(a),e[i].setAttribute("source",spongeapi.getDynamicImage(a));else(e=document.getElementById(a))&&(e.src=spongeapi.getDynamicImage(a),e.setAttribute("source",spongeapi.getDynamicImage(a)))},handleSetupResponse=function(e){if(!spongeapi.initComplete){switch(window.spongecell.apiData=e||{},!spongecell.apiData.assets&&testData&&(spongecell.apiData=testData),spongeapi.type){case"canvas":spongeapi.isDynamic&&spongecell.apiData.assets&&spongeapi.parseDynamicCanvasImages(),spongeapi.initObj.loadManifest(lib.properties.manifest);var a=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;a&&createjs&&(createjs.DisplayObject.prototype.setTransform=function(e,a,i,s,n,t,p,o,g){if(this.x=e||0,this.y=a||0,this.scaleX=null==i?1:i,this.scaleY=null==s?1:s,this.rotation=n||0,this.skewX=t||0,this.skewY=p||0,this.regX=o||0,this.regY=g||0,this.text&&this.getMeasuredLineHeight){var r=this.getMeasuredLineHeight();this.textBaseline="top",r=r>12&&50>r?.3*this.getMeasuredLineHeight():r>49?.2*this.getMeasuredLineHeight():.2*this.getMeasuredLineHeight(),this.y=Math.ceil(this.y+r)}return this});break;case"gwd":spongeapi.initObj.initAd(),spongeapi.isDynamic&&spongecell.apiData.properties&&spongeapi.parseDynamicClasses();break;case"edge":spongeapi.isDynamic&&spongecell.apiData.properties&&spongeapi.parseEdge();break;case"custom":spongeapi.isDynamic&&spongecell.apiData.properties&&spongeapi.parseDynamicClasses()}spongeapi.onReady&&spongeapi.onReady()}spongeapi.initComplete=!0},window.addEventListener("message",function(event){var message=event.data;message&&eval(message.callback)(message.data)});